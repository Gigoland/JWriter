/**
 * JWriter - Language script converter
 * @version 0.0.3
 * @author Gigoland.com
 * @license MIT License
 * @see {@link https://github.com/Gigoland/JWriter}
 * @description Modern lightweight JavaScript library for real-time language script conversion
 */
String.prototype.jWriterConvert=function(t){if(!t)return this.toString();const e=this.toString(),i=[];for(let s=0;s<e.length;s++){const l=e[s],n=t.alphabet.indexOf(l);i.push(n>=0?String.fromCharCode(t.unicode+n):l)}return i.join("")},Element.prototype.jWriterValue=function(t){if(this.focus(),void 0!==this.selectionStart){const e=this.selectionStart,i=this.selectionEnd,s=this.scrollTop;this.value=this.value.substring(0,e)+t+this.value.substring(i),this.scrollTop=s;const l=e+t.length;this.setSelectionRange(l,l)}else this.value+=t};class JWriter{static waiting=new Set;constructor(t,e,i=null,s=null){if(!t||!/input|textarea/i.test(t.nodeName))throw new Error("JWriter requires an input or textarea element.");this.$element=t,this.collection=e,this.language=i||this.$element.dataset.language||null,this.alphabet=s||this.$element.dataset.alphabet||null,this.language&&!this.alphabet&&this.collection[this.language]&&(this.alphabet=Object.keys(this.collection[this.language])[0]),this.handler=null,JWriter.waiting.add(this)}static initAll(){JWriter.waiting.forEach((t=>t.activate()))}activate(t=!1){this.params=this.collection?.[this.language]?.[this.alphabet]||null,this.params&&(this.$element.dataset.jwriterInitialized&&!t||(t&&this.handler&&this.$element.removeEventListener("keypress",this.handler),this.$element.dataset.jwriterInitialized="true",this.handler=this.write.bind(this),this.$element.addEventListener("keypress",this.handler)))}destroy(){this.handler&&(this.$element.removeEventListener("keypress",this.handler),this.handler=null),delete this.$element.dataset.jwriterInitialized,JWriter.waiting.delete(this)}write(t){if(!this.params)return;const e=t.key&&1===t.key.length?t.key:String.fromCharCode(t.which||t.keyCode),i=e.jWriterConvert(this.params);i!==e&&(t.preventDefault(),this.$element.jWriterValue(i))}switch(t=null,e=null){t&&(this.language=t),e&&(this.alphabet=e),this.language&&!this.alphabet&&this.collection[this.language]&&(this.alphabet=Object.keys(this.collection[this.language])[0]),this.activate(!0)}static switchAll(t=null,e=null){JWriter.waiting.forEach((i=>i.switch(t,e)))}}"undefined"!=typeof module&&module.exports&&(module.exports=JWriter);
