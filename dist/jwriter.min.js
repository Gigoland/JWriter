/**
 * JWriter - Modern lightweight DOM utility library
 * Version: 0.0.1
 * Author: Gigoland.com
 * License: MIT License
 * Repository: https://github.com/Gigoland/JWriter
 * Description: Language script converter
 */
class JWriter{static waiting=new Set;constructor(t,e,i="ka",s="mkhedruli"){if(!t||!/input|textarea/i.test(t.nodeName))throw new Error("JWriter requires an input or textarea element.");this.$element=t,this.collection=e,this.language=i,this.alphabet=s,JWriter.waiting.add(this)}static initAll(){JWriter.waiting.forEach((t=>t.activate()))}activate(){if(!this.collection||!this.collection[this.language]||!this.collection[this.language][this.alphabet])throw new Error("JWriter: collection does not contain the requested language/alphabet.");this.params=this.collection[this.language][this.alphabet],this.$element.dataset.jwriterInitialized="true",this.handler=this.write.bind(this),this.$element.addEventListener("keypress",this.handler)}destroy(){this.handler&&this.$element.removeEventListener("keypress",this.handler),JWriter.waiting=new Set}write(t){const e=t.key&&1===t.key.length?t.key:String.fromCharCode(t.which||t.keyCode),i=e.jWriterConvert(this.params);i!==e&&(t.preventDefault(),this.$element.jWriterValue(i))}static convert(t){const e=String(this),i=[];for(let s=0;s<e.length;s++){const r=e[s],n=t.alphabet.indexOf(r);i.push(n>=0?String.fromCharCode(t.unicode+n):r)}return i.join("")}static setValue(t){if(this.focus(),void 0!==this.selectionStart){const e=this.selectionStart,i=this.selectionEnd,s=this.scrollTop;this.value=this.value.substring(0,e)+t+this.value.substring(i),this.scrollTop=s;const r=e+t.length;this.setSelectionRange(r,r)}else this.value+=t}switch(t=null,e=null){t&&(this.language=t),e&&(this.alphabet=e),this.handler&&this.$element.removeEventListener("keypress",this.handler),this.activate()}static switchAll(t=null,e=null){JWriter.waiting.forEach((i=>i.switch(t,e)))}}document.addEventListener("DOMContentLoaded",(()=>{String.prototype.jWriterConvert=JWriter.convert,Element.prototype.jWriterValue=JWriter.setValue}));
